
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Coders</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="responsive.css">
    <!-- Map -->

    <script src="https://cdn.tailwindcss.com"></script>
</head>
<style>
    * {
        margin: 0px;
        padding: 0px;
        font-family: sans-serif;

      }

      body {
        background: rgb(5,5,5);
        background: linear-gradient(97deg, rgba(5,5,5,1) 0%, rgba(3,15,34,1) 35%, #051d41 100%);
      }

      .navbar {
        display: flex;
        justify-content: space-around;
        height: 80px;
        color: white;
      }
      .navbar .ham
      {
        display: none;
      }
      .left img {
        height: 100%;
        width: 100%;
        margin-left: 15%;
      }

      .right {
        display: flex;
        justify-content: center;
        align-items: center;
        justify-content: space-around;
        width: 60%;
      }

      .search {
        background-color: #1f1f1f; /* Darker background for better contrast */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 40px;
        gap: 40px;
        border-radius: 8px; /* Rounded corners for a modern look */
        width: 60%; /* Adjust width for better alignment */
        margin: 20px auto; /* Center the search section */
        color: white;
      }

      .search div {
        display: flex;
        justify-content: space-between; /* Space between label and input */
        align-items: center; /* Vertically align content */
        width: 100%; /* Ensure full width for each row */
      }

      .search p {
        font-size: 18px;
        margin: 0;
        width: 150px; /* Fixed width for labels */
        text-align: center;
      }

      .search input[type="text"] {
        padding: 10px;
        border-radius: 4px;
        border: 1px solid #333;
        background-color: #333;
        color: white;
        min-width:max-content;
        min-width:max-content;
        width: calc(100% - 170px); /* Subtract label width and gap */
        box-sizing: border-box; /* Include padding in width */
      }

      .search input[type="text"]::placeholder {
        color: #aaa;
      }



      .button {
        width: 110px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap: 10px;
        background-color: rgb(161, 255, 20);
        border-radius: 30px;
        color: rgb(19, 19, 19);
        font-weight: 600;
        border: none;
        position: relative;
        cursor: pointer;
        transition-duration: .2s;
        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.116);
        padding-left: 8px;
        transition-duration: .5s;

        /* For centring */
        margin:0px auto;
      }

      .svgIcon {
        height: 25px;
        transition-duration: 1.5s;
      }

      .bell path {
        fill: rgb(19, 19, 19);
      }

      .button:hover {
        background-color: rgb(192, 255, 20);
        transition-duration: .5s;
      }

      .button:active {
        transform: scale(0.97);
        transition-duration: .2s;
      }

      .button:hover .svgIcon {
        transform: rotate(250deg);
        transition-duration: 1.5s;
      }

      /* Map */
      #map{
        height: 400px;
        width: 70%;
        margin:20px auto;
        border-radius: 5px;
        color:black;
      }
      #distance
      {
        color: white;
      }
      h3
      {
        color: white;
      }


      /* Basic Structure */
      .tab-container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        background-color: #e0f3ff;
        padding: 20px;
        border-radius: 15px;
      }

      .tabs {
        display: flex;
        justify-content: space-evenly;
        margin-bottom: 20px;
        border-radius: 50px;
        background-color: #fff;
      }

      .tab {
        padding: 10px 20px;
        background-color: transparent;
        border: none;
        cursor: pointer;
        font-size: 18px;
        transition: color 0.3s ease;
      }

      .tab.active {
        color: #007bff;
        font-weight: bold;
      }

      .tab:hover {
        color: #0056b3;
      }

      /* Card Slider */
      .card-slider {
        position: relative;
        overflow: hidden;
        width: 100%;
      }

      .card-group {
        display: flex;
        transition: transform 0.6s ease-in-out;
        width: 300%;
      }

      .card-group.active {
        transform: translateX(0%);
      }

      .card-group.inactive {
        display: none;
      }

      .card {
        flex: 0 0 300px; /* Fixed width for the cards */
        margin: 0 10px;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        text-align: center;
        padding: 5px;
        min-height: 200px;

      }

      .card .image {
        width: 100%;
        height: 200px;
        object-fit: contain;
        border-radius: 5px;
      }

      .card-group.active {
        display: flex;
      }


      .card {
        background: linear-gradient(135deg, #fff, #f8f9fa);
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        width: 350px;
        overflow: hidden;
        transition: transform 0.4s ease, box-shadow 0.4s ease;
      }

      .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      }

      .card img {
        width: 100%;
        height: 220px;
        object-fit: cover;
        border-bottom: 3px solid #007BFF;
      }

      .card-content {
        padding: 20px;
        text-align: center;
      }

      .card-content h2 {
        font-size: 1.3rem;
        margin-bottom: 10px;
        color: #007BFF;
        font-weight: 600;
      }

      .card-content .description {
        font-size: 0.8rem;
        color: #6c757d;
        margin-bottom: 20px;
        line-height: 1.6;
      }

      .info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        flex-wrap: wrap;;
      }

      .info div {
        text-align: center;
        font-size: 0.7rem;
      }

      .info div i {
        font-size: 28px;
        color: #007BFF;
        margin-bottom: 5px;
        transition: color 0.3s ease;
      }

      .info div:hover i {
        color: #28a745;
      }

      .info div span {
        display: block;
        margin-top: 8px;
        font-weight: bold;
        color: #495057;
      }

      /* Button Styles */
      .card-button {
        background: linear-gradient(135deg, #28a745, #218838);
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: background 0.4s ease, box-shadow 0.3s ease;
      }

      .card-button:hover {
        background: linear-gradient(135deg, #218838, #1e7e34);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .card-button:active {
        transform: scale(0.98);
      }
      .info .fas
      {
        font-size:1rem;
      }
      .via i
      {
        margin:10px 3px;
      }
</style>
<body>
    <nav class="navbar" id="navbar">
        <div class="left">
            <a href="#">
                <img src="images/Team_Elite.png" alt="Logo">
            </a>
        </div>

        <button class="ham"><i class="fa-solid fa-bars"></i></button>

        <div class="right">
            <a href="index.html" class="home">Home</a>
            <a href="#">Plan Your Trip</a>
            <a href="#"  class="abt">About Us</a>
            <a href="#" class="contactUs" onclick="console.log('contact-us clicked')">Contact Us</a>
        </div>
    </nav>


    <!-- 1st Page -->
    <form class="form" action="#" method="POST">
    <div class="search">
        <div class="location">
            <p>Start location</p>
            <input type="text" name="source" id="startloc" placeholder="Enter starting location...">
        </div>

        <div class="destination">
            <p>Destination location</p>
            <input type="text" name="destination" id="endloc" placeholder="Enter destination...">
        </div>
        <a href="#" class="details-btn" onclick="event.preventDefault(); searchDetails()">
        <div class="Search-" id="searchButton">

        <button class="button" >
        <svg class="svgIcon" viewBox="0 0 512 512" height="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm50.7-186.9L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"></path></svg>
        Search
        </button>
        </div>
        </a>    <!-- button -->
    </div><!--Search-->
    </form>
    <script>
        function searchDetails() {
            const source = document.getElementById('startloc').value;
            const destination = document.getElementById('endloc').value;

            if (source && destination) {
                window.location.href = `/result?source=${encodeURIComponent(source)}&destination=${encodeURIComponent(destination)}`;
            } else {
                alert('Please fill in both source and destination fields.');
            }
        }
    </script>



    <Center><h3>Map - </h3></Center>


    <!-- Map -->
    <div id="map"></div>
    <div id="distance" style="text-align:center">"Enter the Details to get the map"</div>

    <!-- Buses -->

    <div class="tab-container">
    <div class="tabs">
        <button class="tab active" data-target="buses">Buses</button>
        <button class="tab" data-target="trains">Trains</button>
        <button class="tab" data-target="airways">Airways</button>
    </div>
    <div class="card-slider">
        <div class="card-group buses active">


            <div class="card">Bus 2</div>
            <div class="card">Bus 3</div>
            <div class="card">Bus 4</div>
        </div>
        <div class="card-group trains">
            <div class="card">Train 1</div>
            <div class="card">Train 2</div>
            <div class="card">Train 3</div>
            <div class="card">Train 4</div>
        </div>
        <div class="card-group airways">
            <div class="card">Airway 1</div>
            <div class="card">Airway 2</div>
            <div class="card">Airway 3</div>
            <div class="card">Airway 4</div>
        </div>
    </div>
</div>

     <script
     src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAZIjXIopI_v8DVQ4h3Z0MuQDn5QvjWdMg&libraries=places" defer>
    </script>
    <script src="script.js" type="text/javascript"></script>
    <script>
        let map;
let directionsService;
let directionsRenderer;
let geocoder;
const customIcons = {
    start: 'images/pin.png',
    destination: 'images/destination.png',
    hotel: 'images/hotel.png',
    bus_station: 'images/bus-stop.png',
    train_station: 'images/train.png',
    airport: 'images/airport.png',
    hospital: 'images/hospital.png'
};

function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 30.3165, lng: 78.0322 }, // Center on Dehradun
        zoom: 8,
    });

    directionsService = new google.maps.DirectionsService();
    directionsRenderer = new google.maps.DirectionsRenderer({
        map: map,
        suppressMarkers: true,
    });

    geocoder = new google.maps.Geocoder();

    document.getElementById('searchButton').addEventListener('click', calculateRoute);
}

function calculateRoute() {
    const startLocation = document.getElementById('startloc').value;
    const destination = document.getElementById('endloc').value;

    if (!startLocation || !destination) {
        handleError('Please enter both start and destination locations.');
        return;
    }

    const request = {
        origin: startLocation,
        destination: destination,
        travelMode: google.maps.TravelMode.DRIVING,
    };

    directionsService.route(request, (result, status) => {
        if (status === 'OK') {
            directionsRenderer.setDirections(result);
            const routePath = result.routes[0].overview_path;
            findNearbyPlaces(routePath);

            addCustomMarker(startLocation, customIcons.start, 'Start Location');
            addCustomMarker(destination, customIcons.destination, 'Destination');
            displayDistanceAndDuration(result.routes[0].legs[0]);
        } else {
            handleError('Directions request failed due to ' + status);
        }
    });
}

function addCustomMarker(location, iconUrl, title) {
    geocoder.geocode({ address: location }, (results, status) => {
        if (status === 'OK') {
            const marker = new google.maps.Marker({
                position: results[0].geometry.location,
                map: map,
                icon: {
                    url: iconUrl,
                    scaledSize: new google.maps.Size(40, 40),
                },
                title: title,
            });

            const infowindow = new google.maps.InfoWindow({
                content: `<strong>${title}</strong><br>${results[0].formatted_address}`,
            });

            marker.addListener('click', () => {
                infowindow.open(map, marker);
            });
        } else {
            handleError('Geocode failed due to: ' + status);
        }
    });
}

function findNearbyPlaces(routePath) {
    const service = new google.maps.places.PlacesService(map);
    const bounds = new google.maps.LatLngBounds();
    const nearbyTypes = ['bus_station', 'hotel', 'train_station', 'airport', 'hospital'];
    const maxDistance = 5000; // Distance in meters to consider points as nearby

    routePath.forEach(latlng => {
        bounds.extend(latlng);
    });

    nearbyTypes.forEach(type => {
        const request = {
            bounds: bounds,
            type: [type],
            rankBy: google.maps.places.RankBy.DISTANCE, // Ensure results are sorted by distance
        };

        service.nearbySearch(request, (results, status) => {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
                if (results.length === 0) {
                    handleInfo(`No ${type.replace('_', ' ')} found along the route.`);
                }
                results.forEach(place => {
                    const placeLocation = place.geometry.location;
                    routePath.forEach(point => {
                        if (google.maps.geometry.spherical.computeDistanceBetween(placeLocation, point) <= maxDistance) {
                            createMarker(place, customIcons[type]);
                        }
                    });
                });
            } else {
                handleError(`Nearby search for ${type.replace('_', ' ')} failed due to ` + status);
            }
        });
    });
}

function createMarker(place, iconUrl) {
    const marker = new google.maps.Marker({
        position: place.geometry.location,
        map: map,
        icon: {
            url: iconUrl,
            scaledSize: new google.maps.Size(40, 40),
        },
        title: place.name,
    });

    const infowindow = new google.maps.InfoWindow({
        content: `<strong>${place.name}</strong><br>${place.vicinity}`,
    });

    marker.addListener('click', () => {
        infowindow.open(map, marker);
    });
}

function displayDistanceAndDuration(leg) {
    const distance = leg.distance.text;
    const duration = leg.duration.text;
    document.getElementById('distance').innerHTML =
        `Distance: ${distance}<br>Duration: ${duration}`;
}

function handleError(message) {
    console.error(message);
    document.getElementById('distance').innerHTML = `Error: ${message}`;
}

function handleInfo(message) {
    console.log(message);
    document.getElementById('distance').innerHTML += `<br>${message}`;
}

window.onload = initMap;

const tabs = document.querySelectorAll(".tab");
const cardGroups = document.querySelectorAll(".card-group");

tabs.forEach(tab => {
    tab.addEventListener("click", () => {
        // Remove active class from other tabs
        document.querySelector(".tab.active").classList.remove("active");
        tab.classList.add("active");

        // Slide effect for the cards
        const target = tab.getAttribute("data-target");

        cardGroups.forEach(group => {
            group.classList.remove("active");
            group.classList.add("inactive");
        });

        document.querySelector(`.card-group.${target}`).classList.remove("inactive");
        document.querySelector(`.card-group.${target}`).classList.add("active");
    });
});

let allBuses=[
{Name:'Dehradun ➡ Yamunanagar',description:' Dehradun to Yamunanagar',distance:'117.4 KM',ac:'No',fair:'₹140/-',via:'Saharanpur, Sarsawa',time:'2:20 AM'},
{Name:'Dehradun ➡ Yamuna',description:' Dehradun to Yamunanagar',distance:'117.4 KM',ac:'No',fair:'₹140/-',via:'Saharanpur, Sarsawa',time:'2:20 AM'},
{Name:'Dehradun ➡ Yamunanagar',description:' Dehradun to Yamunanagar',distance:'117.4 KM',ac:'No',fair:'₹140/-',via:'Saharanpur, Sarsawa',time:'2:20 AM'},
{Name:'Dehradun ➡ Yamunanagar',description:' Dehradun to Yamunanagar',distance:'117.4 KM',ac:'No',fair:'₹140/-',via:'Saharanpur, Sarsawa',time:'2:20 AM'},
]
let bus=document.querySelector('.card-slider .buses ,card');
let busCard=`
    <div class="card">
  <img src="images/blue-bus.avif" alt="Travel Image" class="image">
  <div class="card-content">
    <h2>Luxury Travel Route</h2>
    <p class="description">Explore beautiful destinations with comfort and ease.</p>
    <div class="info">
      <div>
        <i class="fas fa-road"></i>
        <span>Distance</span>
        200 km
      </div>
      <div>
        <i class="fas fa-clock"></i>
        <span>Departure Time</span>
        8:30 AM
      </div>
      <div>
        <i class="fas fa-snowflake"></i>
        <span>AC</span>
        Available
      </div>
      <div>
        <i class="fas fa-money-bill-wave"></i>
        <span>Fare</span>
        ₹500
      </div>
      <div class='via'>
        <i class="fas fa-map-marker-alt"></i>
        <b>Via</b> - Route A

      </div>
    </div>
    <button class="card-button">Book Now</button>
  </div>
</div>
`;

function addBuses()
{

let content=``;
allBuses.forEach(obj=>{

    content+=`<div class="card">
  <img src="images/blue-bus.avif" alt="Travel Image" class="image">
  <div class="card-content">
    <h2>${obj.Name}</h2>
    <p class="description">${obj.description}</p>
    <div class="info">
      <div>
        <i class="fas fa-road"></i>
        <span>Distance</span>
        ${obj.distance}
      </div>
      <div>
        <i class="fas fa-clock"></i>
        <span>Departure Time</span>
        ${obj.time}
      </div>
      <div>
        <i class="fas fa-snowflake"></i>
        <span>AC</span>
        ${obj.ac}
      </div>
      <div>
        <i class="fas fa-money-bill-wave"></i>
        <span>${obj.fair}</span>
        ₹500
      </div>
      <div class='via'>
        <i class="fas fa-map-marker-alt"></i>
        <b>Via</b> - ${obj.via}

      </div>
    </div>
    <button class="card-button">Book Now</button>
  </div>
</div>`;
})
bus.innerHTML=content;
}

addBuses();
    </script>
    <script src="https://kit.fontawesome.com/f794a9dced.js" crossorigin="anonymous"></script>
</body>
</html>